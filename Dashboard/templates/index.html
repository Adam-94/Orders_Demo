<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    
    </head>
    <body>
      {% block header %}
        <h2 class=title>Starline Blinds & Awnings - Dashboard</h2>
      {% endblock %}
        <div class="container">
            <div class="functions">
                <input class="searchBar" type="text" size="50" class="search" onkeydown="search(this)"
                placeholder="Search for customer..." onfocus="this.placeholder = ''"
                onblur="this.placeholder = 'Search for customer...'"/>
                <button class="entryBtn" id="modal-btn"><i class="fas fa-plus"></i></button>
            </div>
            <div class="card-container">
              {% with messages = get_flashed_messages() %}
              {% if messages %}
              {% for msg in messages %}
                    <div class="message-div" id="message-div">
                      <span class="msg-close">&times;</span>
                      <p>{{ msg }}</p>
                    </div>
              {% endfor %}
              {% endif %}
              {% endwith%}

              {% block content %}
                <table class="magic-table" id="table">
                    <thead>
                      <tr>
                        <th scope="col">Customer ID</th>
                        <th scope="col">Date</th>
                        <th scope="col">Name</th>
                        <th scope="col">Address</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Email</th>
                      </tr>
                    </thead>
                    <tbody>

                      {% for customer in customers %}
                      <tr>
                        <td >{{ customer.id }}</td>
                        <td>{{ customer.date_added.strftime('%d-%m-%Y') }}</td>
                        <td>{{ customer.name }}</td>
                        <td>{{ customer.address }}</td>
                        <td>{{ customer.phone }}</td>
                        <td>{{ customer.email }}</td>
                        <td><a href="{{ url_for('orders', customer_id=customer.id) }}" id="table-view">View</a></td>
                      </tr>
                      {% endfor %}

                    </tbody>
                  </table>
                
                  <div class="form-modal" id="modal">
                    <form action="{{ url_for('add_customer') }}" method="POST" class="form" id="customer-form">
                        <span class="close">&times;</span>
                        <!-- start form group -->
                        <div class="form-group">
                          <input type="text" name="name" placeholder=" " id="name" autocomplete="off" required>
                          <label for="name" class="label-name">
                            <span class="content-name">Name</span>
                          </label>
                        </div>
                         <!-- end form group -->
                        
                         <!-- start form group -->
                        <div class="form-group">
                          <input type="text" name="address" placeholder=" " id="address" autocomplete="off" required>
                          <label for="address" class="label-name">
                            <span class="content-name">Address</span>
                          </label>
                        </div>
                        <!-- end form group -->
                        
                         <!-- start form group -->
                        <div class="form-group">
                          <input type="phone" name="phone" placeholder=" " id="phone" autocomplete="off" required>
                          <label for="phone" class="label-name">
                            <span class="content-name">Phone</span>
                          </label>
                        </div>
                        <!-- end form group -->

                         <!-- start form group -->
                         <div class="form-group">
                            <input type="email" name="email" placeholder=" " id="email" autocomplete="off">
                            <label for="email" class="label-name">
                              <span class="content-name">Email</span>
                            </label>
                          </div>
                          <!-- end form group -->
                          <button type="submit" class='submit-form' onclick="validateAndSend()" >Submit</button>
                        </form>
                  </div>
                  {% endblock %}
                  
            </div>
        </div>
  
        
        <script src="{{url_for('static', filename='main.js')}}"></script>
        
      </body>
</html>